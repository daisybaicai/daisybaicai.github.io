(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{208:function(t,e,a){t.exports=a.p+"assets/img/1603.a672eceb.png"},209:function(t,e,a){t.exports=a.p+"assets/img/1604.5182a17a.png"},234:function(t,e,a){"use strict";a.r(e);var r=a(0),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"react生命周期"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react生命周期"}},[t._v("#")]),t._v(" React生命周期")]),t._v(" "),r("p",[r("img",{attrs:{src:a(208),alt:"react 16.3生命周期图"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(209),alt:"react 16.4生命周期图"}})]),t._v(" "),r("p",[t._v("上图源于官网"),r("a",{attrs:{href:"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("以上两张图分别展示了React 16.3,React 16.4^的生命周期图，下面我们再来一起仔细分析一下这个过程。")]),t._v(" "),r("h2",{attrs:{id:"生命周期总览"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#生命周期总览"}},[t._v("#")]),t._v(" 生命周期总览")]),t._v(" "),r("p",[t._v("生命周期可以大致分为三个部分：")]),t._v(" "),r("ul",[r("li",[t._v("Mount 第一次组件挂在到DOM上")]),t._v(" "),r("li",[t._v("Update 组件state,props的变化引发的重新渲染")]),t._v(" "),r("li",[t._v("UnMount 组件从DOM树上删除")])]),t._v(" "),r("h2",{attrs:{id:"_16-3"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_16-3"}},[t._v("#")]),t._v(" 16.3")]),t._v(" "),r("h3",{attrs:{id:"mount"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mount"}},[t._v("#")]),t._v(" Mount")]),t._v(" "),r("ul",[r("li",[t._v("constructor 初始化state，绑定本地this，")]),t._v(" "),r("li",[t._v("componentWillMount 预装载，此处不能修改state，做了也不会更新")]),t._v(" "),r("li",[t._v("render 渲染函数，唯一不能省略的函数。根据this.state,this.props的不同来进行渲染的函数。不能在函数中进行修改this.state,this.props,拉去数据等副作用操作。他一个仅仅用于渲染的纯函数。render 返回 JSX对象。何时进行渲染，将挂载到DOM上是由React决定的。")]),t._v(" "),r("li",[t._v("componentDidMount 挂载成功的函数。 render仅仅返回JSX对象，没有立即被挂载到DOM上，componentDidMount在已经挂载到DOM上以后调用的。")])]),t._v(" "),r("h3",{attrs:{id:"update"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[t._v("#")]),t._v(" Update")]),t._v(" "),r("ul",[r("li",[t._v("ComponentWillReceiveProps(nextProps) 组件更新以及父组件更新调用后执行，根据this.props传入当前的props,以及nextProps要更新的,两者比较，是否需要更新来重新setState")]),t._v(" "),r("li",[t._v("shouldComponentUpdate(nextProps, nextState) 组件是否需要更新，优化性能")]),t._v(" "),r("li",[t._v("ComponentWillUpdate 预更新函数")]),t._v(" "),r("li",[t._v("render 渲染函数")]),t._v(" "),r("li",[t._v("ComponentDidUpdate 更新完成的函数")])]),t._v(" "),r("p",[t._v("比较常用的：")]),t._v(" "),r("ul",[r("li",[t._v("ComponentWillReceiveProps 状态是否修改")]),t._v(" "),r("li",[t._v("shouldComponentUpdate 组件是否更新，提高性能，避免不必要的渲染")])]),t._v(" "),r("h3",{attrs:{id:"unmount"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#unmount"}},[t._v("#")]),t._v(" Unmount")]),t._v(" "),r("ul",[r("li",[t._v("ComponentWillUnmount React组件需要从Dom上移除前，会调用这个函数。像清除定时器，删除ComponentDidMount中非React元素等。")])]),t._v(" "),r("h2",{attrs:{id:"_16-4"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_16-4"}},[t._v("#")]),t._v(" 16.4")]),t._v(" "),r("h3",{attrs:{id:"新生命周期"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#新生命周期"}},[t._v("#")]),t._v(" 新生命周期")]),t._v(" "),r("h4",{attrs:{id:"getderviedstatefromprops"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#getderviedstatefromprops"}},[t._v("#")]),t._v(" getDerviedStateFromProps")]),t._v(" "),r("ul",[r("li",[t._v("静态函数，所以函数体内不能访问this，输出完全由输入决定。")]),t._v(" "),r("li",[t._v("每次接收新的props之后都会返回一个对象作为新的state，返回null则说明不需要更新state.")]),t._v(" "),r("li",[t._v("配合ComponentDidUpdate, 覆盖所有ComponentWillReceiveProps的用法")])]),t._v(" "),r("h4",{attrs:{id:"getsnapshotbeforeupdate"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate")]),t._v(" "),r("ul",[r("li",[t._v("配合ComponentDidUpdate, 覆盖所有ComponentWillUpdate的用法")]),t._v(" "),r("li",[t._v("update发生的时候，在render之后，在组件dom渲染之前。")])]),t._v(" "),r("h3",{attrs:{id:"删除生命周期"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#删除生命周期"}},[t._v("#")]),t._v(" 删除生命周期")]),t._v(" "),r("ul",[r("li",[t._v("componentWillReceiveProps")]),t._v(" "),r("li",[t._v("componentWillMount")]),t._v(" "),r("li",[t._v("componentWillUpdate")])])])}),[],!1,null,null,null);e.default=s.exports}}]);